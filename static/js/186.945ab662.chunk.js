(self.webpackChunk_3d_examples=self.webpackChunk_3d_examples||[]).push([[186],{7186:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(5671),r=n(3144),i=n(136),o=n(9388),s=n(7313),l=n(3562),c=n(40),u=n(9737),d=n(6438),f=n(8665),m=n.n(f),v=n(4556),x=n.n(v),p=n(6417),w=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(e){var r;return(0,a.Z)(this,s),(r=t.call(this,e)).initThree=function(){var e=document.getElementById("container"),t=new l.CP7({antialias:!0});t.setPixelRatio(window.devicePixelRatio),t.setSize(r.width,r.height),t.shadowMap.enabled=!0,r.renderer=t,e.appendChild(t.domElement);var a=new l.xsS;a.background=new l.Ilk(14540253),r.scene=a;var i=new l.cPb(70,window.innerWidth/window.innerHeight,.001,1e3);i.position.set(0,0,7),r.camera=i,window.addEventListener("resize",(function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)}),!1);var o=new l.DvJ(.001,.001,.001),s=new l.YBo({color:14423578}),f=new l.Kj0(o,s);f.position.set(0,0,0);var v=new l.Ox3(14540253,1);v.intensity=1.2,v.position.set(-5,8,3),v.castShadow=!0,v.target=f,v.shadow.mapSize.width=6144,v.shadow.mapSize.height=6144,v.shadow.camera.top=10,v.shadow.camera.bottom=-5,v.shadow.camera.left=-5,v.shadow.camera.right=10,a.add(v);var p=new l.Mig(14540253);a.add(p);var w=function(e,t){var n,a,r=e.position;n=(n=e.children[0].geometry.clone()).applyMatrix((new l.yGw).makeTranslation(r.x,r.y,r.z)),a=(a=e.children[1].geometry).clone().applyMatrix((new l.yGw).makeTranslation(r.x,r.y,r.z));var i=e.children[0].geometry.attributes.position.array.length/3,o=e.children[1].geometry.attributes.position.array.length/3,s=new Array(i).fill(t/100);n.addAttribute("offset",new l.TlE(new Float32Array(s),1));var c=new Array(o).fill(t/100);a.addAttribute("offset",new l.TlE(new Float32Array(c),1));for(var u=new l.Pa4(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),d=new Array(3*i).fill(0),f=new Array(3*o).fill(0),m=0;m<3*i;m+=3)d[m]=u.x,d[m+1]=u.y,d[m+2]=u.z;n.addAttribute("axis",new l.TlE(new Float32Array(d),3));for(var v=0;v<3*o;v+=3)f[v]=u.x,f[v+1]=u.y,f[v+2]=u.z;a.addAttribute("axis",new l.TlE(new Float32Array(f),3));for(var x=function(e){for(var t=e.attributes.position.array,n=t.length,a=0,r=0,i=0,o=0;o<n;o+=3)a+=t[o],r+=t[o+1],i+=t[o+2];return{x:3*a/n,y:3*r/n,z:3*i/n}}(n),p=new Array(3*i).fill(0),w=new Array(3*o).fill(0),h=0;h<3*i;h+=3)p[h]=x.x,p[h+1]=x.y,p[h+2]=x.z;for(var y=0;y<3*o;y+=3)w[y]=x.x,w[y+1]=x.y,w[y+2]=x.z;return n.addAttribute("centroId",new l.TlE(new Float32Array(p),3)),a.addAttribute("centroId",new l.TlE(new Float32Array(w),3)),{surface:n,volume:a}};r.textureCube=(new l.cBK).load([n(5730),n(1305),n(1203),n(4864),n(3528),n(334)]),r.material=new l.jyz({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:l.ehD,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},inside:{type:"f",value:0},surfaceColor:{type:"v3",value:r.surfaceColor},insideColor:{type:"v3",value:r.insideColor},tCube:{value:r.textureCube},pixels:{type:"v2",value:new l.FM8(r.width,r.height)},uvRate1:{value:new l.FM8(1,1)}},vertexShader:x(),fragmentShader:m()}),r.material1=r.material.clone(),r.material1.uniforms.inside.value=1,function(){var e=[],t=[],n=[],i=0;(new c.E).load(d,(function(o){o.scene.traverse((function(t){"Voronoi_Fracture"===t.name&&(t.children[0].children.length>2?t.children.forEach((function(t){t.children.forEach((function(t){e.push(t.clone())}))})):t.children.forEach((function(t){e.push(t.clone())})))})),e.filter((function(e){if(e.isMesh)return!1;i++;var a=w(e,i);return r.inverted?(n.push(a.surface),t.push(a.volume)):(t.push(a.surface),n.push(a.volume)),!0})),new l.Kj0((0,u.qf)(t,!1),r.material).frustumCulled=!1,new l.Kj0((0,u.qf)(n,!1),r.material).frustumCulled=!1,a.add(o.scene),r.heart=o.scene}))}(),function e(){r.heart&&(r.heart.rotation.y+=.01),r.time+=.05,r.mouseX+=.05*(r.targetmouseX-r.mouseX),r.material&&(r.material.uniforms.progress.value=Math.abs(r.progress)),r.material1&&(r.material1.uniforms.progress.value=Math.abs(r.progress)),requestAnimationFrame(e),t.render(a,i)}()},r.renderer=null,r.scene=null,r.camera=null,r.width=window.innerWidth,r.height=window.innerHeight,r.mouseX=0,r.mouseY=0,r.targetmouseX=0,r.targetmouseY=0,r.heart=null,r.textureCube=null,r.material=null,r.material1=null,r.progress=0,r.inverted=!1,r}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){this.initThree()}},{key:"render",value:function(){return(0,p.jsx)("div",{id:"container"})}}]),s}(s.Component)},8665:function(e){e.exports="uniform float time;\nuniform float progress;\nuniform float inside;\nuniform vec3 surfaceColor;\nuniform vec3 insideColor;\nuniform samplerCube tCube;\n\nvarying vec2 vUv;\nvarying vec2 vUv1;\nvarying vec3 eye;\nvarying vec3 vNormal;\nvarying vec3 vReflect;\n\n\nvoid main ()\t{\n\tvec3 r = reflect(eye, vNormal);\n\tfloat m = 2. * sqrt(pow(r.x, 2.) + pow(r.y, 2.) + pow(r.z + 1., 2.));\n\tvec2 vN = r.xy / m + .5;\n\tvec4 reflectedColor = textureCube(tCube, vec3(-vReflect.x, vReflect.yz));\n\n\tvec3 light = normalize(vec3(12.,10.,10.));\n\tvec3 light1 = normalize(vec3(-12.,-10.,-10.));\n\tfloat l = clamp(dot(light, vNormal),0.5,1.);\n\tl += clamp(dot(light1, vNormal),0.5,1.)/2.;\n\n\tif (inside>0.5) {\n\t\tgl_FragColor = vec4(l,l,l,1.)*vec4(surfaceColor,1.);\n\t} else {\n\t\tgl_FragColor = reflectedColor*vec4(insideColor,1.);\n\t}\n}"},4556:function(e){e.exports="uniform float time;\nuniform float progress;\nuniform float inside;\n\nattribute vec3 centroId;\nattribute vec3 axis;\nattribute float offset;\n\nvarying vec3 eye;\nvarying vec3 vNormal;\nvarying vec3 vReflect;\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n  mat4 m = rotationMatrix(axis, angle);\n  return (m * vec4(v, 1.0)).xyz;\n}\n\nvec3 bezier4(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n  return mix(mix(mix(a, b, t), mix(b, c, t), t), mix(mix(b, c, t), mix(c, d, t), t), t);\n}\n\nfloat easeInOutQuint(float t){\n  return t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * (--t) * t * t * t * t;\n}\nfloat easeOutQuint(float t){\n  return 1. + (--t) * t * t * t * t;\n}\nfloat easeOut(float t){\n  return  t * t * t;\n}\n\n\nvoid main() {\n\n\n\n  vec3 newposition = position;\n\n\n  float vTemp =  1. - (centroId.z*1.4 + 1.)/2.;\n\n  float tProgress = max(0.0, (progress - vTemp*0.5) /0.5);\n\n  vec3 newnormal = rotate(normal,axis,tProgress*(3. + offset*10.));\n  vNormal = newnormal;\n\n  newposition = rotate(newposition - centroId,axis,(1. - vTemp)*tProgress*(3. + offset*10.)) + centroId;\n  newposition += newposition + (1.5 - vTemp)*centroId*(tProgress)*(3. + vTemp*7. + offset*3.);\n\n\n\n  eye = normalize( vec3( modelViewMatrix * vec4( newposition, 1.0 ) ) );\n  vec4 worldPosition = modelMatrix * vec4( newposition, 1.0 );\n  vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * newnormal );\n  vec3 I = worldPosition.xyz - cameraPosition;\n  vReflect = reflect( I, worldNormal );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newposition, 1.0 );\n}"},6438:function(e,t,n){"use strict";e.exports=n.p+"static/media/heart.fe55d3de7019f6c39a69.glb"},1305:function(e,t,n){"use strict";e.exports=n.p+"static/media/nx.41d97f803e0b307aca04.jpg"},4864:function(e,t,n){"use strict";e.exports=n.p+"static/media/ny.96ca45f510df7d63ce27.jpg"},334:function(e,t,n){"use strict";e.exports=n.p+"static/media/nz.7e443a87322a46b519d9.jpg"},5730:function(e,t,n){"use strict";e.exports=n.p+"static/media/px.29af852ad77ee9943f86.jpg"},1203:function(e,t,n){"use strict";e.exports=n.p+"static/media/py.d4185b45c9ff16c5da03.jpg"},3528:function(e,t,n){"use strict";e.exports=n.p+"static/media/pz.e78185d64e25a98a11a4.jpg"}}]);